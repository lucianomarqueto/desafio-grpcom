<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

<style>
    .highcharts-figure, .highcharts-data-table table {
        min-width: 310px; 
        max-width: 800px;
        margin: 1em auto;
    }

    #container {
        height: 400px;
    }

    .highcharts-data-table table {
        font-family: Verdana, sans-serif;
        border-collapse: collapse;
        border: 1px solid #EBEBEB;
        margin: 10px auto;
        text-align: center;
        width: 100%;
        max-width: 500px;
    }
    .highcharts-data-table caption {
        padding: 1em 0;
        font-size: 1.2em;
        color: #555;
    }
    .highcharts-data-table th {
        font-weight: 600;
        padding: 0.5em;
    }
    .highcharts-data-table td, .highcharts-data-table th, .highcharts-data-table caption {
        padding: 0.5em;
    }
    .highcharts-data-table thead tr, .highcharts-data-table tr:nth-child(even) {
        background: #f8f8f8;
    }
    .highcharts-data-table tr:hover {
        background: #f1f7ff;
    }

</style>

<figure class="highcharts-figure">
    <div id="container"></div>
    <p class="highcharts-description">
        Chart showing a combination of a column and a line chart, using multiple
        y-axes. Using multiple axes allows for data within different ranges to
        be visualized together.
    </p>
</figure>

<script>
    function loadChart(JSON){
        Highcharts.chart('container', {
            chart: {
                zoomType: 'xy'
            },
            title: {
                text: 'Curva ABC'
            },        
            xAxis: [{
                categories: JSON.chart.categories,
                plotBands: [{ 
                        from: -0.5,
                        to: JSON.chart.plot_bands.a,
                        color: 'rgba(0, 255, 0, .2)',
                        label: { 
                            text: 'A - maior que 50%',
                            align: 'center'                    
                        },
                    },
                    { 
                        from: JSON.chart.plot_bands.a,
                        to: JSON.chart.plot_bands.b,
                        color: 'rgba(240, 230, 140, .2)',
                        label: { 
                            text: 'B - de 20% a 50%',
                            align: 'center'                    
                        }
                    },
                    { 
                        from: JSON.chart.plot_bands.b,
                        to: JSON.chart.plot_bands.c,
                        color: 'rgba(210, 105, 30, .2)',
                        label: { 
                            text: 'C - at√© 20%',
                            align: 'center'                    
                        }
                    }],    
                crosshair: true
            }],
            yAxis: [{ // Primary yAxis
                labels: {
                    format: 'R$ {value}',
                    style: {
                        color: Highcharts.getOptions().colors[1]
                    }
                },
                title: {
                    text: 'Patrimonio',
                    style: {
                        color: Highcharts.getOptions().colors[1]
                    }
                }
            }, { // Secondary yAxis
                title: {
                    text: 'Acumulado',
                    style: {
                        color: Highcharts.getOptions().colors[0]
                    }
                },
                labels: {
                    format: '{value}%',
                    style: {
                        color: Highcharts.getOptions().colors[0]
                    }
                },
                opposite: true
            }],
            tooltip: {
                shared: true
            },
            legend: {
                layout: 'vertical',
                align: 'left',
                x: 120,
                verticalAlign: 'top',
                y: 100,
                floating: true,
                backgroundColor:
                    Highcharts.defaultOptions.legend.backgroundColor || // theme
                    'rgba(255,255,255,0.25)'
            },
            series: [{
                name: 'Patrimonio',
                type: 'column',
                
                data: JSON.chart.patrimonio,
                tooltip: {
                    valuePrefix: 'R$ '
                }

            }, {
                name: 'Acumulado',
                type: 'spline',
                yAxis: 1,
                data: JSON.chart.acumulado,
                tooltip: {
                    valueSuffix: '%'
                }
            }]
        });
    }

    function loadJSON(callback) {   

        var xobj = new XMLHttpRequest();
            xobj.overrideMimeType("application/json");
        xobj.open('GET', 'chart.json', true); // Replace 'my_data' with the path to your file
        xobj.onreadystatechange = function () {
            if (xobj.readyState == 4 && xobj.status == "200") {
                // Required use of an anonymous callback as .open will NOT return a value but simply returns undefined in asynchronous mode
                callback(xobj.responseText);
            }
        };
        xobj.send(null);  
    }    

    //_json = `{"chart": {"categories": ["House Lannister", "House Targaryen", "House Stark", "House Frey", "House Martell", "House Waynwood", "House Webber", "House Dayne", "House Baratheon", "Night's Watch", "House of Loraq", "House Tyrell", "House Royce", "House Tully", "House Redfort", "House Clegane", "House Botley", "House Karstark", "Blacks", "House Merryweather", "House Cuy", "House Stackspear", "House Selmy", "House Darry", "House Humble", "House Dayne of High Hermitage", "House Prester", "House Wylde", "Drowned men", "House Kettleblack", "House Darklyn", "House Meadows", "Orwyle", "House Swyft", "House Lothston", "Gavin", "House Harlaw of the Tower of Glimmering", "Xhondo", "Qarro Volentin", "House Chyttering", "House Ball", "Lister", "Matt", "House Bolton", "House Conklyn", "House Manwoody", "House Weaver", "House Allyrion", "Kemmett Pyke", "House Florent", "Benjen Stark (Bitter)", "Daeron II Targaryen", "Durran", "Galladon of Morne", "Wilbert", "Antler Men", "Collio Quaynis", "Second Sons", "Grisella", "House Suggs", "House Vypren", "House Lynderly", "Daeryssa", "House Cerwyn", "Happy Port", "House Mudd", "Harwyn Hoare", "House Reed", "Shella", "House Ruttiger", "Alia", "Mance Rayder", "House Goodbrother", "Hizdahr zo Loraq", "Jaehaerys II Targaryen", "Normund Tyrell", "Gillam", "Roone (maester)", "House Ironmaker", "Ayrmidon", "Luco Prestayn", "House Flint of Widow's Watch", "Miklaz", "House Banefort", "Sylas Flatnose", "House Mertyns", "House Mullendore", "House Willum", "House Hunter", "House Uffering", "Meliana", "Meha", "Denestan", "House Greenfield", "House Fell", "Kyle", "House Farrow", "Kojja Mo", "House Hardyng", "Tysha", "Tansy (orphan)", "House Chelsted", "House Sarsfield", "House Lannister of Lannisport", "House Poole", "Garth XII Gardener", "Reysen", "House Tollett", "House Liddle", "City Watch of King's Landing", "House Santagar", "Helliweg", "House Vance of Wayfarer's Rest", "Clement", "Bella", "Citadel", "House Dustin", "Nymos", "Fralegg", "Guyne", "House of Kandaq", "House Brune of the Dyre Den", "House of Pahl", "House Hasty", "Willum", "Willifer", "Quill", "Arson", "House Foote", "Urron Greyiron", "Symeon Star-Eyes", "Bump", "House Staedmon", "Griffin King", "House of Galare", "Qarl the Maid", "Ryam", "Medwick Tyrell", "Bessa (Winterfell)", "Tagganaro", "House Penrose", "S'vrone", "Khal", "House Blackwood", "Ocley", "Ebrose", "Alaric of Eysen", "House Cassel", "Chataya's brothel", "Dormund", "House Buckler", "House Celtigar", "Aegon II Targaryen", "House Baratheon of King's Landing", "Yorko Terys", "Pono", "Windblown", "Brandon Stark (Burner)", "Larraq", "Tristifer V Mudd", "House Tarly", "House Charlton", "Harrag Hoare", "Arneld", "House Velaryon", "Tristifer IV Mudd", "Helly", "Stormcrows", "House Wythers", "House Roote", "House Harlaw of Harlaw Hall", "House Vance of Atranta", "House Templeton", "House Kenning of Harlaw", "Agrivane", "Bessa", "House Piper", "Nissa Nissa", "Gulian", "Saathos", "Rafe", "Moredo Prestayn", "House Rosby", "Alfyn", "House Gargalen", "Erreck", "House Condon", "House Fossoway", "Bael the Bard", "Cutjack", "Timon", "Illifer", "House Massey", "House Vikary", "Maynard", "Orbelo", "Thistle", "House Whent", "Sky Blue Su", "Murenmure", "Grigg", "Bodger", "House Harlaw of Harridan Hill", "House Bolling", "Rodrik Freeborn", "House Tyrell of Brightwater Keep", "House Costayne", "House Sunglass", "Mysaria", "Aethelmure", "Erreg", "Tothmure", "Toefinger", "Poetess", "House Harlaw of Grey Garden", "Will (orphan)", "Joseran", "Cetheres", "House Myre", "Temmo", "Qarl Quickaxe", "Gyloro Dothare", "Unsullied", "House Longthorpe", "Mother Mole", "House Leygood", "Byan Votyris", "House Norridge", "Veiled Lady", "Owen (brother of Meribald)", "Wyl the Whittler", "Theon Stark", "Malcolm", "Canker Jeyne", "Rhogoro", "House Wagstaff", "Narbo", "Willamen Frey", "House Nymeros Martell", "Lanna", "House Cafferen", "House Byrch", "Maesters", "Bryan of Oldtown", "Lucantine Woodwright", "Rosey", "Dudley", "Endehar", "Cleon", "Dorren Stark", "House Norrey", "Beqqo", "House Blackbar", "Roro Uhoris", "House Deddings", "Viserys II Targaryen", "Todric", "House Drinkwater", "Alysanne Targaryen", "Lady of the Leaves", "House Frey of Riverrun", "House Shett of Gull Tower", "Sybassion", "Joramun", "Will (squire)", "House Merlyn", "Gorne", "Sharna", "House Estren", "Dobber", "House Goodbrother of Shatterstone", "Ben", "Stone Crows", "Jon Pox", "House Hunt", "House Wynch", "House Crane", "House Gower", "Ned (ferryman)", "Tanselle", "House Wells", "Portifer Woodwright", "House Spicer", "Melwys Rivers", "House Staunton", "Harle the Handsome", "Weasel", "Blind Doss", "Talea", "House Greyjoy", "House Bushy", "Rolfe", "Dan", "Mallor (Knight)", "House Lefford", "House Hornwood", "Lancel V Lannister", "House of Ghazeen", "House Coldwater", "Ironbelly", "House Mormont", "Terro", "Dyah", "Jon Vance", "Buu", "House Potter", "House Ryger", "Willow Witch-eye", "The Citadel", "Pylos", "Oro Tendyris", "Fogo", "Qarl the Thrall", "House Rykker", "House Fossoway of Cider Hall", "Ghost of High Heart", "Bellonara Otherys", "House Hetherspoon", "Varamyr", "Wun Weg Wun Dar Wun", "House Grimm", "Donyse", "Kyleg", "House of Reznak", "Melicent", "House Penny", "Kedry", "Brave Companions", "Rawney", "House Hogg", "House Oakheart", "House Haigh", "Old Crackbones", "Aerys II Targaryen", "Symon Silver Tongue", "R'hllor", "House Blanetree", "Ambrode", "Tobho Mott", "House Peckledon", "House Boggs", "Ottomore", "Steely Pate", "Kym", "House Caron", "Garizon", "Wendello Qar Deeth", "Thirteen", "House Tawney", "House Rhysling", "Brea", "Baelor I Targaryen", "Urrathon", "Azor Ahai", "Viserys I Targaryen", "Monster", "Grey King", "Genna Lannister", "Beldecar", "Gareth the Grey", "Khorane Sathmantes", "House Grandison", "Zekko", "Esgred", "Lomys", "Woth", "House Royce of the Gates of the Moon", "Sloey", "Marwyn", "Jeyne Waters", "House Stonetree", "Brotherhood without Banners", "Chayle", "House Chester", "House Inchfield", "House Turnberry", "Aegon V Targaryen", "Roger of Pennytree"], "acumulado": [9.86, 16.41, 21.06, 23.43, 25.1, 26.47, 27.61, 28.69, 29.73, 30.73, 31.64, 32.49, 33.27, 33.96, 34.65, 35.33, 35.99, 36.64, 37.25, 37.82, 38.38, 38.94, 39.44, 39.91, 40.38, 40.84, 41.29, 41.74, 42.18, 42.62, 43.05, 43.47, 43.87, 44.28, 44.68, 45.06, 45.45, 45.83, 46.21, 46.59, 46.97, 47.34, 47.71, 48.08, 48.45, 48.82, 49.18, 49.54, 49.91, 50.27, 50.63, 50.98, 51.34, 51.69, 52.04, 52.39, 52.74, 53.09, 53.44, 53.78, 54.12, 54.46, 54.8, 55.13, 55.46, 55.79, 56.12, 56.45, 56.77, 57.09, 57.41, 57.72, 58.04, 58.35, 58.66, 58.97, 59.27, 59.58, 59.88, 60.18, 60.47, 60.77, 61.06, 61.35, 61.64, 61.93, 62.21, 62.5, 62.78, 63.06, 63.34, 63.61, 63.88, 64.16, 64.43, 64.7, 64.97, 65.24, 65.5, 65.77, 66.04, 66.3, 66.56, 66.82, 67.08, 67.33, 67.59, 67.84, 68.1, 68.35, 68.6, 68.85, 69.1, 69.35, 69.59, 69.84, 70.08, 70.32, 70.56, 70.8, 71.04, 71.28, 71.51, 71.75, 71.98, 72.21, 72.44, 72.67, 72.9, 73.12, 73.35, 73.57, 73.8, 74.02, 74.24, 74.46, 74.68, 74.9, 75.12, 75.34, 75.56, 75.77, 75.99, 76.21, 76.42, 76.63, 76.83, 77.04, 77.24, 77.44, 77.65, 77.85, 78.05, 78.25, 78.44, 78.64, 78.84, 79.03, 79.23, 79.42, 79.62, 79.81, 80.0, 80.19, 80.38, 80.56, 80.75, 80.93, 81.12, 81.3, 81.48, 81.66, 81.85, 82.02, 82.2, 82.38, 82.56, 82.73, 82.91, 83.08, 83.26, 83.43, 83.61, 83.78, 83.95, 84.12, 84.29, 84.45, 84.62, 84.78, 84.94, 85.1, 85.26, 85.42, 85.57, 85.73, 85.89, 86.04, 86.2, 86.35, 86.51, 86.66, 86.82, 86.97, 87.12, 87.27, 87.43, 87.58, 87.73, 87.88, 88.03, 88.18, 88.32, 88.47, 88.61, 88.76, 88.9, 89.04, 89.18, 89.32, 89.46, 89.6, 89.74, 89.87, 90.01, 90.14, 90.27, 90.41, 90.54, 90.67, 90.8, 90.92, 91.05, 91.18, 91.31, 91.43, 91.56, 91.68, 91.8, 91.92, 92.04, 92.15, 92.27, 92.39, 92.5, 92.61, 92.72, 92.83, 92.94, 93.05, 93.16, 93.26, 93.37, 93.47, 93.57, 93.67, 93.77, 93.86, 93.96, 94.05, 94.15, 94.24, 94.33, 94.42, 94.52, 94.61, 94.7, 94.79, 94.88, 94.97, 95.06, 95.14, 95.23, 95.32, 95.41, 95.49, 95.58, 95.66, 95.74, 95.83, 95.91, 95.99, 96.07, 96.16, 96.24, 96.31, 96.39, 96.47, 96.55, 96.62, 96.7, 96.77, 96.85, 96.92, 96.99, 97.06, 97.13, 97.2, 97.27, 97.34, 97.41, 97.48, 97.55, 97.61, 97.68, 97.75, 97.81, 97.88, 97.94, 98.0, 98.06, 98.11, 98.17, 98.23, 98.28, 98.33, 98.39, 98.44, 98.49, 98.54, 98.59, 98.64, 98.68, 98.73, 98.78, 98.83, 98.87, 98.92, 98.96, 99.0, 99.04, 99.09, 99.13, 99.17, 99.21, 99.25, 99.28, 99.32, 99.35, 99.39, 99.42, 99.45, 99.48, 99.51, 99.54, 99.57, 99.6, 99.62, 99.65, 99.67, 99.69, 99.71, 99.73, 99.75, 99.77, 99.79, 99.81, 99.82, 99.84, 99.85, 99.87, 99.88, 99.89, 99.9, 99.92, 99.93, 99.94, 99.95, 99.96, 99.96, 99.97, 99.98, 99.98, 99.99, 99.99, 99.99, 100.0, 100.0], "patrimonio": [1692026.0, 1122626.0, 797806.0, 406321.0, 286571.0, 234205.0, 196603.0, 185308.0, 178450.0, 171628.0, 156123.0, 145201.0, 133331.0, 119014.0, 118136.0, 115898.0, 114020.0, 112113.0, 104599.0, 97593.0, 95917.0, 95242.0, 85733.0, 81709.0, 79932.0, 78430.0, 77723.0, 76437.0, 76116.0, 75406.0, 72986.0, 72328.0, 69569.0, 69211.0, 69135.0, 66161.0, 65811.0, 65604.0, 65544.0, 65379.0, 63963.0, 63891.0, 63718.0, 63563.0, 63366.0, 62764.0, 62443.0, 62286.0, 62286.0, 61929.0, 61541.0, 61375.0, 60831.0, 60333.0, 60329.0, 60291.0, 59932.0, 59663.0, 59546.0, 59269.0, 58250.0, 58171.0, 57585.0, 56880.0, 56848.0, 56456.0, 56449.0, 56377.0, 55453.0, 55086.0, 54212.0, 54103.0, 54019.0, 53844.0, 52956.0, 52623.0, 52406.0, 52370.0, 51713.0, 51416.0, 50305.0, 50112.0, 49811.0, 49795.0, 49735.0, 49632.0, 49221.0, 49029.0, 47955.0, 47836.0, 47673.0, 47154.0, 46814.0, 46619.0, 46597.0, 46506.0, 46373.0, 45870.0, 45803.0, 45622.0, 45615.0, 44893.0, 44608.0, 44608.0, 44386.0, 43998.0, 43869.0, 43654.0, 43420.0, 43324.0, 43276.0, 42975.0, 42955.0, 42471.0, 41826.0, 41801.0, 41678.0, 41596.0, 41458.0, 41235.0, 40699.0, 40503.0, 40418.0, 40122.0, 39958.0, 39776.0, 39507.0, 39367.0, 38809.0, 38695.0, 38584.0, 38320.0, 38248.0, 38147.0, 37904.0, 37857.0, 37822.0,
    // 37721.0, 37668.0, 37608.0, 37411.0, 37357.0, 37064.0, 37000.0, 36028.0, 35742.0, 35607.0, 35185.0, 35003.0, 34786.0, 34608.0, 34308.0, 34285.0, 34141.0, 33975.0, 33954.0, 33860.0, 33624.0, 33480.0, 33272.0, 33109.0, 32959.0, 32615.0, 32381.0, 32357.0, 32200.0, 31721.0, 31500.0, 31462.0, 31444.0, 31348.0, 31088.0, 31081.0, 30753.0, 30674.0, 30380.0, 30370.0, 30308.0, 30083.0, 30075.0, 30034.0, 29848.0, 29700.0, 29665.0, 29289.0, 28994.0, 28836.0, 28226.0, 28148.0, 27960.0, 27620.0, 27440.0, 27244.0, 26986.0, 26932.0, 26904.0, 26849.0, 26686.0, 26683.0, 26679.0, 26401.0, 26393.0, 26320.0, 26284.0, 26191.0, 26182.0, 26133.0, 26129.0, 25910.0, 25756.0, 25685.0, 25494.0, 24968.0, 24929.0, 24756.0, 24668.0, 24565.0, 24233.0, 24194.0, 24062.0, 23942.0, 23788.0, 23375.0, 23350.0, 23000.0, 22884.0, 22712.0, 22624.0, 22345.0, 22288.0, 22277.0, 21990.0, 21976.0, 21974.0, 21973.0, 21601.0, 21471.0, 20579.0, 20469.0, 20390.0, 20261.0, 20213.0, 19962.0, 19807.0, 19448.0, 19096.0, 19080.0, 18979.0, 18976.0, 18598.0, 18580.0, 18058.0, 17635.0, 17475.0, 17397.0, 16910.0, 16868.0, 16482.0, 16169.0, 16146.0, 16119.0, 15941.0, 15941.0, 15915.0, 15869.0, 15750.0, 15745.0, 15586.0, 15169.0, 15138.0, 15133.0, 14981.0, 14972.0, 14942.0, 14909.0, 14851.0, 14613.0, 14525.0, 14270.0, 14141.0, 14105.0, 14063.0, 14041.0, 14006.0, 13808.0, 13605.0, 13598.0, 13374.0, 13151.0, 12934.0, 12930.0, 12739.0, 12617.0, 12460.0, 12434.0, 12257.0, 12117.0, 11905.0, 11859.0, 11851.0, 11741.0, 11642.0, 11578.0, 11510.0, 11459.0, 11311.0, 11291.0, 11226.0, 10617.0, 10253.0, 9979.0, 9792.0, 9567.0, 9505.0, 9284.0, 9208.0, 9044.0, 8905.0, 8626.0, 8586.0, 8447.0, 8346.0, 8301.0, 8089.0, 8040.0, 7994.0, 7949.0, 7814.0, 7446.0, 7319.0, 7073.0, 7063.0, 7027.0, 6855.0, 6815.0, 6651.0, 6271.0, 6206.0, 6079.0, 5835.0, 5651.0, 5648.0, 5031.0, 4959.0, 4872.0, 4790.0, 4695.0, 4493.0, 4323.0, 3919.0, 3791.0, 3790.0, 3625.0, 3478.0, 3213.0, 3057.0, 2733.0, 2556.0, 2503.0, 2501.0, 2410.0, 2337.0, 2245.0, 2181.0, 2042.0, 2039.0, 1891.0, 1721.0, 1310.0, 1284.0, 1108.0, 1012.0, 926.0, 754.0, 662.0, 600.0, 509.0, 441.0], "plot_bands": {"a": 49, "b": 162, "c": 378}}}`;
    //var JSON = JSON.parse(_json);
    //console.log(JSON);
    //loadChart(JSON);

    loadJSON(function(response) {
        // Parse JSON string into object
        loadChart(JSON.parse(response));        
    });


</script>

